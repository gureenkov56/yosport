import { ULink, UButton } from '../.nuxt/components';
<template>
  <main class="wrapper">
    <h1>üèÜ Leaderboard</h1>

    <div>
      <select id="discipline" v-model="selectedDiscipline" :class="{width120: selectedDiscipline === 'pullups'}">
        <option value="pullups" selected>–ü–æ–¥—Ç—è–≥–∏–≤–∞–Ω–∏—è</option>
        <option value="dips">–û—Ç–∂–∏–º–∞–Ω–∏—è –Ω–∞ –±—Ä—É—Å—å—è—Ö</option>
      </select>
    </div>

    <UTable :data="sortedTableData" class="flex-1 mt-3" :columns="columns" ><div>ss</div></UTable>

<!--      <div v-for="{ id, name, RecordDips, RecordPullUps } in sortedTableData" :key="id" :class="{error: id == +userId}">-->
<!--        {{ id }} | {{ name }} / {{ RecordDips }} / {{ RecordPullUps }}-->
<!--      </div>-->
      <ULink to="/create-user">
        <UButton class="mt-5">–î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</UButton>
      </ULink>
  </main>
</template>

<script lang='ts' setup>
import type {User} from "~/generated/prisma";

const selectedDiscipline = ref('pullups')

const {data} = await useFetch<User[]>('/api/users')

const sortedTableData = computed(() => {
  const sorted = [...data.value].sort((a, b) => {
    const resultA = selectedDiscipline.value === 'pullups' ? a.RecordPullUps : a.RecordDips;
    const resultB = selectedDiscipline.value === 'pullups' ? b.RecordPullUps : b.RecordDips;

    return resultA > resultB ? -1 : 1
  })

  // console.log('sorted')

  // console.log('data.value', data.value)
  // sorted[0].name = sorted[0].name + ' üèÜ';
  // sorted[1].name = sorted[1].name + ' ü•à';
  // sorted[2].name = sorted[2].name + ' ü•â';

  return sorted
})

const columns = [
  {
    accessorKey: 'name',
    header: ''
  },
  {
    accessorKey: 'RecordPullUps',
    header: '–¢—É—Ä–Ω–∏–∫',
  },
  {
    accessorKey: 'RecordDips',
    header: '–ë—Ä—É—Å—å—è',
  },
]

const userStore = useUserStore()

const userId = computed(() => userStore.id)
</script>

<style lang="scss" scoped>
main {
  h1 {
    text-align: center;
  }

  select {
    -webkit-appearance: none;
    -moz-appearance: none;

    -webkit-user-select: none; /* Safari */
    -moz-user-select: none; /* Firefox */
    -ms-user-select: none; /* Internet Explorer/Edge */
    user-select: none; /* Standard */

    display: block;
    margin: 0 auto;

    &::-ms-expand {
      display: none;
    }

    &:focus {
      outline: none;
    }

    &.width120 {
      width: 120px;
    }
  }


}
</style>
